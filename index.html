<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ENGLISH WITH AI BAYAN ‚Äì Grade 7 Grammar</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    :root{
      --red-main:#d62828;        /* –∞–ª—ã–π –æ—Å–Ω–æ–≤–Ω–æ–π */
      --red-soft:#ff7b7b;        /* –∞–ª—ã–π –º—è–≥–∫–∏–π */
      --green-main:#2b9348;      /* –∑–µ–ª—ë–Ω—ã–π –∞–∫—Ü–µ–Ω—Ç */
      --green-soft:#b7efc5;      /* —Å–≤–µ—Ç–ª–æ-–∑–µ–ª—ë–Ω—ã–π */
      --bg:#fff5f5;
      --card:#ffffff;
      --text:#2c1414;
      --border-soft:#f2c4c4;
      --danger:#b71c1c;
      --success:#1b5e20;
      --accent:#ffb703;
    }

    *{
      box-sizing:border-box;
      margin:0;
      padding:0;
      font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
    }

    body{
      background:var(--bg);
      color:var(--text);
    }

    header{
      background:linear-gradient(90deg,var(--red-main),var(--red-soft));
      color:#fff;
      padding:10px 16px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      box-shadow:0 2px 6px rgba(0,0,0,0.25);
    }

    .brand{
      display:flex;
      align-items:center;
      gap:10px;
    }

    .logo-circle{
      width:42px;
      height:42px;
      border-radius:50%;
      border:2px solid var(--green-soft);
      background:#fff;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:0.75rem;
      color:var(--red-main);
      font-weight:700;
    }

    .brand-text{
      display:flex;
      flex-direction:column;
    }

    .brand-text h1{
      font-size:1.05rem;
      letter-spacing:0.04em;
    }

    .brand-text span{
      font-size:0.78rem;
      opacity:0.9;
    }

    #userSummary{
      font-size:0.78rem;
      text-align:right;
    }

    #userSummary b{
      color:var(--green-soft);
    }

    main{
      max-width:1100px;
      margin:14px auto 24px;
      padding:0 10px 30px;
    }

    .screen{display:none;}
    .screen.active{display:block;}

    /* LOGIN CARD */
    .login-card{
      max-width:430px;
      margin:28px auto;
      background:var(--card);
      border-radius:16px;
      box-shadow:0 2px 10px rgba(0,0,0,0.12);
      padding:18px 18px 20px;
      border-top:4px solid var(--green-main);
    }

    .login-card h2{
      margin-bottom:8px;
      font-size:1.15rem;
      color:var(--red-main);
    }

    .login-card p{
      font-size:0.9rem;
      margin-bottom:8px;
    }

    label{
      display:block;
      font-size:0.85rem;
      margin:8px 0 4px;
    }

    input[type="text"],
    input[type="number"]{
      width:100%;
      padding:8px 10px;
      border-radius:10px;
      border:1px solid var(--border-soft);
      outline:none;
      font-size:0.9rem;
      background:#fffdfd;
    }

    input:focus{
      border-color:var(--red-main);
      box-shadow:0 0 0 1px rgba(214,40,40,0.25);
    }

    .btn{
      border:none;
      border-radius:999px;
      padding:7px 17px;
      font-size:0.9rem;
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:4px;
      white-space:nowrap;
    }

    .btn-primary{
      background:var(--red-main);
      color:#fff;
    }

    .btn-ghost{
      background:#ffe3e3;
      color:var(--red-main);
    }

    .btn-outline{
      background:transparent;
      color:var(--red-main);
      border:1px solid var(--red-main);
    }

    .btn:active{transform:scale(0.97);}

    .btn-row{
      display:flex;
      gap:8px;
      margin-top:12px;
      flex-wrap:wrap;
      justify-content:flex-end;
    }

    .hint{
      font-size:0.8rem;
      opacity:0.8;
      margin-top:4px;
    }

    .error-msg{
      font-size:0.8rem;
      color:var(--danger);
      margin-top:6px;
      min-height:1em;
    }

    /* TOPICS LIST */
    .topics-header{
      margin-bottom:10px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:6px;
      flex-wrap:wrap;
    }

    .topics-header h2{
      font-size:1.05rem;
    }

    .pill{
      display:inline-flex;
      align-items:center;
      gap:4px;
      padding:3px 9px;
      border-radius:999px;
      font-size:0.75rem;
      background:var(--green-soft);
      color:#1b4332;
    }

    .star-pull{
      display:inline-flex;
      align-items:center;
      gap:4px;
      font-size:0.82rem;
    }

    .star-pull span:first-child{
      color:var(--accent);
      font-size:1rem;
    }

    .topic-list{
      display:flex;
      flex-direction:column;
      gap:10px;
      margin-top:8px;
    }

    .topic-card{
      background:var(--card);
      border-radius:14px;
      padding:10px 12px;
      box-shadow:0 1px 3px rgba(0,0,0,0.12);
      border-left:5px solid var(--green-soft);
      cursor:pointer;
    }

    .topic-card:hover{
      box-shadow:0 2px 6px rgba(0,0,0,0.18);
      transform:translateY(-1px);
    }

    .topic-title-line{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:6px;
      margin-bottom:3px;
    }

    .topic-title-line h3{
      font-size:0.96rem;
    }

    .topic-level{
      font-size:0.75rem;
      color:#607d8b;
    }

    .topic-stars{
      font-size:0.75rem;
      color:#f57f17;
      white-space:nowrap;
    }

    /* TOPIC SCREEN */
    .topic-header-card{
      background:var(--card);
      border-radius:16px;
      box-shadow:0 2px 8px rgba(0,0,0,0.15);
      padding:12px 12px 8px;
      margin-bottom:10px;
      border-top:4px solid var(--green-main);
    }

    .topic-header-title{
      font-size:1rem;
      font-weight:600;
      margin-bottom:6px;
    }

    .topic-tagline{
      font-size:0.8rem;
      color:#607d8b;
      margin-bottom:8px;
    }

    .topic-buttons{
      display:flex;
      gap:6px;
      flex-wrap:wrap;
    }

    .content-card{
      background:var(--card);
      border-radius:16px;
      box-shadow:0 1px 5px rgba(0,0,0,0.11);
      padding:12px;
      margin-top:10px;
    }

    .rule-box{
      border-left:4px solid var(--green-main);
      background:#f4fff6;
      padding:8px 10px;
      font-size:0.88rem;
      margin-bottom:8px;
    }

    .rule-box b{color:#1b5e20;}
    .rule-box + .rule-box{
      border-left-color:var(--red-soft);
      background:#fff5f5;
    }

    .formula-box{
      border-left:4px solid #ffa726;
      background:#fff7e6;
      padding:7px 10px;
      font-size:0.86rem;
      margin-bottom:10px;
    }

    .exercise-block{
      border-left:4px solid #ffcc80;
      background:#fffaf3;
      padding:8px 10px 10px;
      font-size:0.86rem;
      margin-top:10px;
      border-radius:10px;
    }

    .exercise-title{
      font-weight:600;
      margin-bottom:4px;
      color:var(--red-main);
    }

    .exercise-note{
      font-size:0.78rem;
      color:#546e7a;
      margin-bottom:4px;
    }

    .question{
      margin-top:4px;
      margin-bottom:2px;
    }

    .options-row{
      margin-left:6px;
      display:flex;
      flex-wrap:wrap;
      gap:6px 14px;
      font-size:0.85rem;
    }

    .option-label{
      margin:0;
      display:flex;
      align-items:center;
      gap:4px;
    }

    .option-label input{
      accent-color:var(--red-main);
    }

    .opt-text{
      margin-right:2px;
    }

    .opt-mark{
      min-width:1em;
      font-size:0.95rem;
    }

    .option-label.correct-chosen .opt-text{
      color:var(--success);
      font-weight:600;
    }

    .option-label.correct-chosen .opt-mark::before{
      content:"‚úì";
      color:var(--success);
    }

    .option-label.wrong-chosen .opt-text{
      color:var(--danger);
      text-decoration:line-through;
    }

    .option-label.wrong-chosen .opt-mark::before{
      content:"‚úó";
      color:var(--danger);
    }

    .check-row{
      margin-top:6px;
      display:flex;
      justify-content:flex-end;
    }

    .exercise-result{
      font-size:0.8rem;
      margin-top:4px;
      min-height:1em;
    }

    .exercise-result.ok{color:var(--success);}
    .exercise-result.bad{color:var(--danger);}

    @media print{
      header,#loginScreen,#mainScreen .topics-header,#mainScreen .topic-list,#userSummary,#topicNavButtons{display:none !important;}
      body{background:#fff;}
      main{max-width:none;margin:0;padding:0;}
      .content-card{box-shadow:none;border-radius:0;}
    }
  </style>
</head>
<body>

<header>
  <div class="brand">
    <div class="logo-circle">
      <!-- —Å—é–¥–∞ –º–æ–∂–Ω–æ –≤—Å—Ç–∞–≤–∏—Ç—å <img src="girl.png"> -->
      AI
    </div>
    <div class="brand-text">
      <h1>ENGLISH WITH AI BAYAN</h1>
      <span>Grade 7 ¬∑ Grammar B ¬∑ Modules 1‚Äì9</span>
    </div>
  </div>
  <div id="userSummary">
    <div id="userStatus">Not logged in</div>
    <div id="userStars">Stars: 0</div>
  </div>
</header>

<main>
  <!-- LOGIN SCREEN -->
  <section id="loginScreen" class="screen active">
    <div class="login-card">
      <h2>Login</h2>
      <p>Enter your <b>Name</b> and <b>Code</b>. The teacher gives this code in class.</p>

      <label for="loginName">Name</label>
      <input id="loginName" type="text" placeholder="Your name" />

      <label for="loginCode">Code</label>
      <input id="loginCode" type="number" placeholder="Your code" />

      <div id="loginError" class="error-msg"></div>

      <div class="btn-row">
        <button class="btn btn-ghost" type="button" onclick="resetLogin()">Reset</button>
        <button class="btn btn-primary" type="button" onclick="handleLogin()">Login</button>
      </div>
    </div>
  </section>

  <!-- MAIN TOPICS SCREEN -->
  <section id="mainScreen" class="screen">
    <div class="topics-header">
      <div>
        <h2>Grade 7 ‚Äì Grammar topics (Modules 1‚Äì9)</h2>
        <div class="pill">
          30 topics ‚Ä¢ each topic has exercises and stars
        </div>
      </div>
      <div class="star-pull">
        <span>‚òÖ</span>
        <span id="starsInfo"></span>
      </div>
    </div>

    <div class="topic-list" id="topicList"></div>
  </section>

  <!-- TOPIC SCREEN -->
  <section id="topicScreen" class="screen">
    <div class="topic-header-card">
      <div class="topic-header-title" id="topicHeaderTitle"></div>
      <div class="topic-tagline" id="topicHeaderTagline"></div>
      <div class="topic-buttons" id="topicNavButtons">
        <button class="btn btn-ghost" type="button" onclick="backToTopics()">‚Üê Back</button>
        <button class="btn btn-ghost" type="button" onclick="goMain()">üè† Main menu</button>
        <button class="btn btn-outline" type="button" onclick="window.print()">üñ® Print</button>
      </div>
    </div>

    <div class="content-card" id="topicContent"></div>
  </section>
</main>

<script>
/* ---------- TOPICS DATA (30 —Ç–µ–º) ---------- */
const topics = [
  /* MODULE 1 */
  {
    id:1,
    title:"Present Simple vs Present Continuous",
    level:"Module 1",
    ruleEn:`<b>Rule (EN):</b> Use <b>Present Simple</b> for habits, routines and facts.<br>
            Use <b>Present Continuous</b> for actions happening <i>now</i> or around now.`,
    ruleRu:`<b>–ü—Ä–∞–≤–∏–ª–æ (RU):</b> <b>Present Simple</b> ‚Äì –ø—Ä–∏–≤—ã—á–∫–∏, —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ, —Ñ–∞–∫—Ç—ã.<br>
            <b>Present Continuous</b> ‚Äì –¥–µ–π—Å—Ç–≤–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç <i>—Å–µ–π—á–∞—Å</i> –∏–ª–∏ –≤—Ä–µ–º–µ–Ω–Ω–∞—è —Å–∏—Ç—É–∞—Ü–∏—è.`,
    formula:`PS: subject + V1 / V1+s<br>
             PC: subject + am / is / are + V-ing`,
    exercises:[
      {
        id:"1a",
        title:"Ex.1 ‚Äì Choose Present Simple or Present Continuous.",
        note:"Each correct answer gives you 1 star.",
        questions:[
          {
            id:"q1",
            text:"1) She ___ (go) to school every day.",
            options:["goes","is going","go"],
            correct:"goes"
          },
          {
            id:"q2",
            text:"2) Listen! The birds ___ (sing).",
            options:["sing","are singing","sings"],
            correct:"are singing"
          }
        ]
      },
      {
        id:"1b",
        title:"Ex.2 ‚Äì Choose the correct option.",
        note:"Present Simple = habit, Present Continuous = now.",
        questions:[
          {
            id:"q3",
            text:"3) I ___ (do) my homework now.",
            options:["do","am doing","does"],
            correct:"am doing"
          },
          {
            id:"q4",
            text:"4) They ___ (play) football on Saturdays.",
            options:["play","are playing","plays"],
            correct:"play"
          }
        ]
      }
    ]
  },
  {
    id:2,
    title:"Singular & Plural nouns",
    level:"Module 1",
    ruleEn:`<b>Rule (EN):</b> Most plurals: add <b>-s</b> (book ‚Üí books).<br>
            After ch, sh, s, x, o: add <b>-es</b> (bus ‚Üí buses).<br>
            Some nouns are irregular (child ‚Üí children, man ‚Üí men).`,
    ruleRu:`<b>–ü—Ä–∞–≤–∏–ª–æ (RU):</b> –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –æ–±—Ä–∞–∑—É—é—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ —Å <b>-s</b>.<br>
            –ü–æ—Å–ª–µ ch, sh, s, x, o ‚Üí <b>-es</b>. –ï—Å—Ç—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ñ–æ—Ä–º—ã (child ‚Üí children).`,
    formula:`one book ‚Äì two books<br>
             one bus ‚Äì two buses<br>
             one child ‚Äì two children`,
    exercises:[
      {
        id:"2a",
        title:"Ex.1 ‚Äì Make plural forms.",
        note:"Choose the correct plural.",
        questions:[
          {
            id:"q1",
            text:"1) one bus ‚Äì two ___",
            options:["buss","buses","busies"],
            correct:"buses"
          },
          {
            id:"q2",
            text:"2) one child ‚Äì two ___",
            options:["childs","children","childes"],
            correct:"children"
          }
        ]
      },
      {
        id:"2b",
        title:"Ex.2 ‚Äì Choose singular or plural.",
        note:"Look at the sentence meaning.",
        questions:[
          {
            id:"q3",
            text:"3) There are many ___ in the park.",
            options:["child","children","childs"],
            correct:"children"
          },
          {
            id:"q4",
            text:"4) This ___ is very interesting.",
            options:["book","books"],
            correct:"book"
          }
        ]
      }
    ]
  },
  {
    id:3,
    title:"Comparative & Superlative adjectives",
    level:"Module 1",
    ruleEn:`<b>Rule (EN):</b> Comparative compares two things (taller, more interesting).<br>
            Superlative shows the most (the tallest, the most interesting).`,
    ruleRu:`<b>–ü—Ä–∞–≤–∏–ª–æ (RU):</b> –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Å—Ç–µ–ø–µ–Ω—å ‚Äì —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–≤—É—Ö –æ–±—ä–µ–∫—Ç–æ–≤ (taller).<br>
            –ü—Ä–µ–≤–æ—Å—Ö–æ–¥–Ω–∞—è —Å—Ç–µ–ø–µ–Ω—å ‚Äì —Å–∞–º—ã–π (the tallest).`,
    formula:`short: tall ‚Üí taller ‚Üí the tallest<br>
             long: interesting ‚Üí more interesting ‚Üí the most interesting<br>
             irregular: good ‚Üí better ‚Üí the best`,
    exercises:[
      {
        id:"3a",
        title:"Ex.1 ‚Äì Comparatives.",
        note:"Choose the correct form.",
        questions:[
          {
            id:"q1",
            text:"1) My house is ___ than yours.",
            options:["biggest","bigger","more big"],
            correct:"bigger"
          },
          {
            id:"q2",
            text:"2) English is ___ than maths for me.",
            options:["easier","the easiest","more easy"],
            correct:"easier"
          }
        ]
      },
      {
        id:"3b",
        title:"Ex.2 ‚Äì Superlatives.",
        note:"Choose the correct superlative.",
        questions:[
          {
            id:"q3",
            text:"3) Mount Everest is ___ mountain in the world.",
            options:["higher","the highest","the most high"],
            correct:"the highest"
          },
          {
            id:"q4",
            text:"4) This is ___ film I‚Äôve ever seen.",
            options:["the best","better","good"],
            correct:"the best"
          }
        ]
      }
    ]
  },
  {
    id:4,
    title:"too / enough",
    level:"Module 1",
    ruleEn:`<b>Rule (EN):</b> <b>too</b> = more than we want (too big).<br>
            <b>enough</b> = sufficient, –Ω–µ —Å–ª–∏—à–∫–æ–º –º–∞–ª–æ (big enough).`,
    ruleRu:`<b>–ü—Ä–∞–≤–∏–ª–æ (RU):</b> <b>too</b> ‚Äì —Å–ª–∏—à–∫–æ–º (too hot).<br>
            <b>enough</b> ‚Äì –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ (warm enough).`,
    formula:`too + adj<br>
             adj + enough`,
    exercises:[
      {
        id:"4a",
        title:"Ex.1 ‚Äì Choose too or enough.",
        note:"Think about meaning.",
        questions:[
          {
            id:"q1",
            text:"1) The tea is ___ hot. I can‚Äôt drink it.",
            options:["enough","too"],
            correct:"too"
          },
          {
            id:"q2",
            text:"2) The bag is big ___. All my books fit inside.",
            options:["too","enough"],
            correct:"enough"
          }
        ]
      },
      {
        id:"4b",
        title:"Ex.2 ‚Äì Complete.",
        note:"Choose the correct option.",
        questions:[
          {
            id:"q3",
            text:"3) He is ___ young to drive a car.",
            options:["too","enough"],
            correct:"too"
          },
          {
            id:"q4",
            text:"4) We have ___ time to finish this task.",
            options:["too","enough"],
            correct:"enough"
          }
        ]
      }
    ]
  },

  /* MODULE 2 */
  {
    id:5,
    title:"can / could / (be) able to",
    level:"Module 2",
    ruleEn:`<b>Rule (EN):</b> <b>can</b> ‚Äì ability now, <b>could</b> ‚Äì ability in the past.<br>
            <b>be able to</b> ‚Äì more formal, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–æ –≤—Å–µ—Ö –≤—Ä–µ–º–µ–Ω–∞—Ö.`,
    ruleRu:`<b>–ü—Ä–∞–≤–∏–ª–æ (RU):</b> <b>can</b> ‚Äì –º–æ–≥—É —Å–µ–π—á–∞—Å, <b>could</b> ‚Äì –º–æ–≥ —Ä–∞–Ω—å—à–µ.<br>
            <b>be able to</b> ‚Äì ¬´–±—ã—Ç—å —Å–ø–æ—Å–æ–±–Ω—ã–º¬ª, —Ñ–æ—Ä–º–∞–ª—å–Ω–∞—è —Ñ–æ—Ä–º–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –≤—Ä–µ–º—ë–Ω.`,
    formula:`can / could + V1<br>
             am / is / are / was / were able to + V1`,
    exercises:[
      {
        id:"5a",
        title:"Ex.1 ‚Äì Choose can or could.",
        note:"Look at the time (now / past).",
        questions:[
          {
            id:"q1",
            text:"1) When I was five, I ___ read.",
            options:["can","could"],
            correct:"could"
          },
          {
            id:"q2",
            text:"2) I ___ speak English and Russian.",
            options:["can","could"],
            correct:"can"
          }
        ]
      },
      {
        id:"5b",
        title:"Ex.2 ‚Äì Choose can, could or be able to.",
        note:"Pay attention to the time word.",
        questions:[
          {
            id:"q3",
            text:"3) One day, you will ___ travel alone.",
            options:["can","be able to","could"],
            correct:"be able to"
          },
          {
            id:"q4",
            text:"4) She ___ swim very well now.",
            options:["can","could"],
            correct:"can"
          }
        ]
      }
    ]
  },
  {
    id:6,
    title:"used to (past habits)",
    level:"Module 2",
    ruleEn:`<b>Rule (EN):</b> <b>used to</b> + V1 ‚Äì past habits or states that are not true now.`,
    ruleRu:`<b>–ü—Ä–∞–≤–∏–ª–æ (RU):</b> <b>used to</b> + V1 ‚Äì –ø—Ä–∏–≤—ã—á–∫–∏ –∏–ª–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ –ø—Ä–æ—à–ª–æ–º, –∫–æ—Ç–æ—Ä—ã—Ö —Å–µ–π—á–∞—Å –Ω–µ—Ç.`,
    formula:`(+): subject + used to + V1<br>
             (-): didn‚Äôt use to + V1<br>
             (?): Did + subject + use to + V1?`,
    exercises:[
      {
        id:"6a",
        title:"Ex.1 ‚Äì Complete with used to.",
        note:"Imagine past habits.",
        questions:[
          {
            id:"q1",
            text:"1) I ___ (play) with toys, but now I play computer games.",
            options:["used to play","use to play","used play"],
            correct:"used to play"
          },
          {
            id:"q2",
            text:"2) She ___ (live) in a village, but now she lives in the city.",
            options:["used to live","use to live","used live"],
            correct:"used to live"
          }
        ]
      },
      {
        id:"6b",
        title:"Ex.2 ‚Äì Negative form.",
        note:"Choose the correct negative.",
        questions:[
          {
            id:"q3",
            text:"3) He ___ get up so early. Now he must.",
            options:["didn‚Äôt use to","didn‚Äôt used to","doesn‚Äôt used to"],
            correct:"didn‚Äôt use to"
          },
          {
            id:"q4",
            text:"4) We ___ have online lessons before.",
            options:["didn‚Äôt use to","haven‚Äôt used to"],
            correct:"didn‚Äôt use to"
          }
        ]
      }
    ]
  },
  {
    id:7,
    title:"-ed / -ing adjectives",
    level:"Module 2",
    ruleEn:`<b>Rule (EN):</b> <b>-ed</b> adjectives describe how people feel (bored, excited).<br>
            <b>-ing</b> adjectives describe things (boring, exciting).`,
    ruleRu:`<b>–ü—Ä–∞–≤–∏–ª–æ (RU):</b> –ü—Ä–∏–ª–∞–≥–∞—Ç–µ–ª—å–Ω—ã–µ –Ω–∞ <b>-ed</b> ‚Äì —á—É–≤—Å—Ç–≤–∞ –ª—é–¥–µ–π (bored).<br>
            –ù–∞ <b>-ing</b> ‚Äì —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ –ø—Ä–µ–¥–º–µ—Ç–æ–≤/—Å–∏—Ç—É–∞—Ü–∏–π (boring).`,
    formula:`I am bored (feeling).<br>
             The film is boring (thing).`,
    exercises:[
      {
        id:"7a",
        title:"Ex.1 ‚Äì Choose bored or boring.",
        note:"Is it a feeling or a thing?",
        questions:[
          {
            id:"q1",
            text:"1) The lesson is very ___.",
            options:["bored","boring"],
            correct:"boring"
          },
          {
            id:"q2",
            text:"2) I am ___ in this class.",
            options:["bored","boring"],
            correct:"bored"
          }
        ]
      },
      {
        id:"7b",
        title:"Ex.2 ‚Äì Choose interested or interesting.",
        note:"Look at who/what we describe.",
        questions:[
          {
            id:"q3",
            text:"3) The book is really ___.",
            options:["interested","interesting"],
            correct:"interesting"
          },
          {
            id:"q4",
            text:"4) We are ___ in grammar apps.",
            options:["interested","interesting"],
            correct:"interested"
          }
        ]
      }
    ]
  },
  {
    id:8,
    title:"Adverbs & degree (quite / rather)",
    level:"Module 2",
    ruleEn:`<b>Rule (EN):</b> Adverbs describe verbs, adjectives or other adverbs.<br>
            <b>quite / rather</b> ‚Äì —Å—Ç–µ–ø–µ–Ω—å –∫–∞—á–µ—Å—Ç–≤–∞: –¥–æ–≤–æ–ª—å–Ω–æ, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ.`,
    ruleRu:`<b>–ü—Ä–∞–≤–∏–ª–æ (RU):</b> –ù–∞—Ä–µ—á–∏—è –æ–ø–∏—Å—ã–≤–∞—é—Ç –¥–µ–π—Å—Ç–≤–∏–µ –∏–ª–∏ –ø—Ä–∏–∑–Ω–∞–∫ (run quickly).<br>
            <b>quite / rather</b> ‚Äì ¬´–¥–æ–≤–æ–ª—å–Ω–æ, –¥–æ–≤–æ–ª—å–Ω–æ-—Ç–∞–∫–∏¬ª.`,
    formula:`adj + -ly ‚Üí adverb (quick ‚Üí quickly)<br>
             quite / rather + adj/adv`,
    exercises:[
      {
        id:"8a",
        title:"Ex.1 ‚Äì Form adverbs.",
        note:"Choose the correct adverb.",
        questions:[
          {
            id:"q1",
            text:"1) He runs very ___. (quick)",
            options:["quick","quickly","quicks"],
            correct:"quickly"
          },
          {
            id:"q2",
            text:"2) She sings ___. (beautiful)",
            options:["beautifully","beautifuly","beautifull"],
            correct:"beautifully"
          }
        ]
      },
      {
        id:"8b",
        title:"Ex.2 ‚Äì quite or rather?",
        note:"Both mean ¬´–¥–æ–≤–æ–ª—å–Ω–æ¬ª, choose one.",
        questions:[
          {
            id:"q3",
            text:"3) This exercise is ___ easy.",
            options:["quite","rather"],
            correct:"quite"
          },
          {
            id:"q4",
            text:"4) It‚Äôs ___ cold today. Take a jacket.",
            options:["quite","rather"],
            correct:"rather"
          }
        ]
      }
    ]
  },
  {
    id:9,
    title:"should / shouldn‚Äôt (advice)",
    level:"Module 2",
    ruleEn:`<b>Rule (EN):</b> <b>should</b> = it is a good idea. <b>shouldn‚Äôt</b> = it isn‚Äôt a good idea.`,
    ruleRu:`<b>–ü—Ä–∞–≤–∏–ª–æ (RU):</b> <b>should</b> ‚Äì —Å–æ–≤–µ—Ç ¬´—Å—Ç–æ–∏—Ç —Å–¥–µ–ª–∞—Ç—å¬ª. <b>shouldn‚Äôt</b> ‚Äì ¬´–Ω–µ —Å—Ç–æ–∏—Ç –¥–µ–ª–∞—Ç—å¬ª.`,
    formula:`should / shouldn‚Äôt + V1`,
    exercises:[
      {
        id:"9a",
        title:"Ex.1 ‚Äì School advice.",
        note:"Choose should or shouldn‚Äôt.",
        questions:[
          {
            id:"q1",
            text:"1) You ___ do your homework every day.",
            options:["should","shouldn‚Äôt"],
            correct:"should"
          },
          {
            id:"q2",
            text:"2) You ___ be late for lessons.",
            options:["should","shouldn‚Äôt"],
            correct:"shouldn‚Äôt"
          }
        ]
      },
      {
        id:"9b",
        title:"Ex.2 ‚Äì Health advice.",
        note:"Choose the best advice.",
        questions:[
          {
            id:"q3",
            text:"3) You ___ eat a lot of fruit and vegetables.",
            options:["should","shouldn‚Äôt"],
            correct:"should"
          },
          {
            id:"q4",
            text:"4) You ___ drink too many energy drinks.",
            options:["should","shouldn‚Äôt"],
            correct:"shouldn‚Äôt"
          }
        ]
      }
    ]
  },

  /* MODULE 3 */
  {
    id:10,
    title:"Present Perfect (ever / never / just / already / yet / since / for)",
    level:"Module 3",
    ruleEn:`<b>Rule (EN):</b> Present Perfect = have / has + V3.<br>
            Use for life experience and results connected with now.`,
    ruleRu:`<b>–ü—Ä–∞–≤–∏–ª–æ (RU):</b> Present Perfect = have / has + V3.<br>
            –ò—Å–ø–æ–ª—å–∑—É–µ–º –¥–ª—è –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ –æ–ø—ã—Ç–∞ –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞, –≤–∞–∂–Ω–æ–≥–æ —Å–µ–π—á–∞—Å.`,
    formula:`(+): have / has + V3<br>
             (-): haven‚Äôt / hasn‚Äôt + V3<br>
             (?): Have / Has + subject + V3?`,
    exercises:[
      {
        id:"10a",
        title:"Ex.1 ‚Äì ever / never.",
        note:"Choose ever or never.",
        questions:[
          {
            id:"q1",
            text:"1) Have you ___ been to London?",
            options:["ever","never"],
            correct:"ever"
          },
          {
            id:"q2",
            text:"2) She has ___ tried sushi.",
            options:["ever","never"],
            correct:"never"
          }
        ]
      },
      {
        id:"10b",
        title:"Ex.2 ‚Äì just / already / yet / since / for.",
        note:"Choose the best option.",
        questions:[
          {
            id:"q3",
            text:"3) We have ___ finished our homework.",
            options:["just","yet","ever"],
            correct:"just"
          },
          {
            id:"q4",
            text:"4) I have lived here ___ 2015.",
            options:["for","since"],
            correct:"since"
          }
        ]
      }
    ]
  },
  {
    id:11,
    title:"have been vs have gone",
    level:"Module 3",
    ruleEn:`<b>Rule (EN):</b> <b>have been</b> ‚Äì visited and came back.<br>
            <b>have gone</b> ‚Äì went there and is still there, not back.`,
    ruleRu:`<b>–ü—Ä–∞–≤–∏–ª–æ (RU):</b> <b>have been</b> ‚Äì ¬´–±—ã–ª –∏ –≤–µ—Ä–Ω—É–ª—Å—è¬ª.<br>
            <b>have gone</b> ‚Äì ¬´—É—à—ë–ª –∏ –µ—â—ë —Ç–∞–º¬ª.`,
    formula:`He has been to London. (Now he is here.)<br>
             He has gone to London. (Now he is in London.)`,
    exercises:[
      {
        id:"11a",
        title:"Ex.1 ‚Äì been or gone?",
        note:"Where is the person now?",
        questions:[
          {
            id:"q1",
            text:"1) My dad isn‚Äôt here. He has ___ to the shop.",
            options:["been","gone"],
            correct:"gone"
          },
          {
            id:"q2",
            text:"2) I have ___ to Paris twice. I‚Äôm at home now.",
            options:["been","gone"],
            correct:"been"
          }
        ]
      },
      {
        id:"11b",
        title:"Ex.2 ‚Äì Choose.",
        note:"Think about the situation.",
        questions:[
          {
            id:"q3",
            text:"3) She has ___ to the dentist and hasn‚Äôt come back yet.",
            options:["been","gone"],
            correct:"gone"
          },
          {
            id:"q4",
            text:"4) We have ___ to that museum many times.",
            options:["been","gone"],
            correct:"been"
          }
        ]
      }
    ]
  },
  {
    id:12,
    title:"Present Perfect vs Past Simple",
    level:"Module 3",
    ruleEn:`<b>Rule (EN):</b> Past Simple ‚Äì finished action in the past, with time word (yesterday, last year).<br>
            Present Perfect ‚Äì experience or result, no exact past time.`,
    ruleRu:`<b>–ü—Ä–∞–≤–∏–ª–æ (RU):</b> Past Simple ‚Äì –∑–∞–≤–µ—Ä—à—ë–Ω–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –≤—Ä–µ–º–µ–Ω–∏.<br>
            Present Perfect ‚Äì –æ–ø—ã—Ç / —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±–µ–∑ —Ç–æ—á–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏.`,
    formula:`PS: I visited London last year.<br>
             PP: I have visited London. (no time)`,
    exercises:[
      {
        id:"12a",
        title:"Ex.1 ‚Äì Choose PS or PP.",
        note:"Look at time words.",
        questions:[
          {
            id:"q1",
            text:"1) I ___ (see) this film yesterday.",
            options:["saw","have seen"],
            correct:"saw"
          },
          {
            id:"q2",
            text:"2) I ___ (see) this film three times.",
            options:["saw","have seen"],
            correct:"have seen"
          }
        ]
      },
      {
        id:"12b",
        title:"Ex.2 ‚Äì Time expressions.",
        note:"Choose correct tense.",
        questions:[
          {
            id:"q3",
            text:"3) She ___ (finish) her project just now.",
            options:["has finished","finished"],
            correct:"has finished"
          },
          {
            id:"q4",
            text:"4) We ___ (go) to the zoo last weekend.",
            options:["went","have gone"],
            correct:"went"
          }
        ]
      }
    ]
  },

  /* MODULE 4 */
  {
    id:13,
    title:"will (predictions, instant decisions)",
    level:"Module 4",
    ruleEn:`<b>Rule (EN):</b> Use <b>will</b> for predictions and decisions made now.`,
    ruleRu:`<b>–ü—Ä–∞–≤–∏–ª–æ (RU):</b> <b>will</b> ‚Äì –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –∏ —Ä–µ—à–µ–Ω–∏—è, –ø—Ä–∏–Ω—è—Ç—ã–µ –≤ –º–æ–º–µ–Ω—Ç —Ä–µ—á–∏.`,
    formula:`(+): subject + will + V1<br>
             (-): subject + won‚Äôt + V1`,
    exercises:[
      {
        id:"13a",
        title:"Ex.1 ‚Äì Predictions.",
        note:"Use will or won‚Äôt.",
        questions:[
          {
            id:"q1",
            text:"1) I think it ___ rain tomorrow.",
            options:["will","won‚Äôt"],
            correct:"will"
          },
          {
            id:"q2",
            text:"2) They ___ be at school on Sunday.",
            options:["will","won‚Äôt"],
            correct:"won‚Äôt"
          }
        ]
      },
      {
        id:"13b",
        title:"Ex.2 ‚Äì Instant decisions.",
        note:"Choose correct form.",
        questions:[
          {
            id:"q3",
            text:"3) It‚Äôs cold here. I ___ close the window.",
            options:["will","am going to"],
            correct:"will"
          },
          {
            id:"q4",
            text:"4) Don‚Äôt worry, I ___ help you.",
            options:["will","am going to"],
            correct:"will"
          }
        ]
      }
    ]
  },
  {
    id:14,
    title:"be going to (plans / predictions)",
    level:"Module 4",
    ruleEn:`<b>Rule (EN):</b> Use <b>be going to</b> for plans and intentions decided before speaking.`,
    ruleRu:`<b>–ü—Ä–∞–≤–∏–ª–æ (RU):</b> <b>be going to</b> ‚Äì –ø–ª–∞–Ω—ã –∏ –Ω–∞–º–µ—Ä–µ–Ω–∏—è, —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–∏–Ω—è—Ç–æ –∑–∞—Ä–∞–Ω–µ–µ.`,
    formula:`subject + am / is / are + going to + V1`,
    exercises:[
      {
        id:"14a",
        title:"Ex.1 ‚Äì Plans.",
        note:"Complete with be going to.",
        questions:[
          {
            id:"q1",
            text:"1) We ___ visit our grandparents this weekend.",
            options:["are going to","will","go"],
            correct:"are going to"
          },
          {
            id:"q2",
            text:"2) She ___ buy a new dress.",
            options:["is going to","are going to","will going to"],
            correct:"is going to"
          }
        ]
      },
      {
        id:"14b",
        title:"Ex.2 ‚Äì Negative plans.",
        note:"Choose correct form.",
        questions:[
          {
            id:"q3",
            text:"3) They ___ not ___ play football today.",
            options:["are going to","aren‚Äôt going to","don‚Äôt going to"],
            correct:"aren‚Äôt going to"
          },
          {
            id:"q4",
            text:"4) I ___ study tonight. I‚Äôm too tired.",
            options:["am not going to","won‚Äôt going to"],
            correct:"am not going to"
          }
        ]
      }
    ]
  },
  {
    id:15,
    title:"Present Continuous for future (arrangements)",
    level:"Module 4",
    ruleEn:`<b>Rule (EN):</b> Use <b>Present Continuous</b> for fixed future arrangements (time + place).`,
    ruleRu:`<b>–ü—Ä–∞–≤–∏–ª–æ (RU):</b> Present Continuous ‚Äì —É–∂–µ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤—Å—Ç—Ä–µ—á–∏ / —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ (–µ—Å—Ç—å –≤—Ä–µ–º—è –∏ –º–µ—Å—Ç–æ).`,
    formula:`subject + am / is / are + V-ing + future time`,
    exercises:[
      {
        id:"15a",
        title:"Ex.1 ‚Äì Future arrangements.",
        note:"Choose the correct form.",
        questions:[
          {
            id:"q1",
            text:"1) We ___ (meet) our friends tomorrow.",
            options:["are meeting","meet","will meet"],
            correct:"are meeting"
          },
          {
            id:"q2",
            text:"2) She ___ (fly) to London next Monday.",
            options:["is flying","will fly","flies"],
            correct:"is flying"
          }
        ]
      },
      {
        id:"15b",
        title:"Ex.2 ‚Äì Rewrite into Present Continuous.",
        note:"Choose the correct answer.",
        questions:[
          {
            id:"q3",
            text:"3) We go to the cinema on Friday. ‚Üí We ___ to the cinema on Friday.",
            options:["are going","will go"],
            correct:"are going"
          },
          {
            id:"q4",
            text:"4) They leave on Tuesday. ‚Üí They ___ on Tuesday.",
            options:["are leaving","will leave"],
            correct:"are leaving"
          }
        ]
      }
    ]
  },

  /* MODULE 5 */
  {
    id:16,
    title:"Character adjectives (personality adjectives)",
    level:"Module 5",
    ruleEn:`<b>Rule (EN):</b> Character adjectives describe what people are like (kind, shy, friendly, lazy).`,
    ruleRu:`<b>–ü—Ä–∞–≤–∏–ª–æ (RU):</b> –ü—Ä–∏–ª–∞–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞ –æ–ø–∏—Å—ã–≤–∞—é—Ç –ª—é–¥–µ–π (–¥–æ–±—Ä—ã–π, —à—É–º–Ω—ã–π, –ª–µ–Ω–∏–≤—ã–π –∏ —Ç.–¥.).`,
    formula:`be + adj (She is friendly. He is lazy.)`,
    exercises:[
      {
        id:"16a",
        title:"Ex.1 ‚Äì Choose the best adjective.",
        note:"Think about positive / negative meaning.",
        questions:[
          {
            id:"q1",
            text:"1) She always helps people. She is ___.",
            options:["selfish","kind"],
            correct:"kind"
          },
          {
            id:"q2",
            text:"2) He never does his homework. He is ___.",
            options:["hard-working","lazy"],
            correct:"lazy"
          }
        ]
      },
      {
        id:"16b",
        title:"Ex.2 ‚Äì Character adjectives.",
        note:"Choose the correct one.",
        questions:[
          {
            id:"q3",
            text:"3) My friend likes talking to everyone. He is ___.",
            options:["shy","sociable"],
            correct:"sociable"
          },
          {
            id:"q4",
            text:"4) She is afraid of speaking in public. She is ___.",
            options:["confident","shy"],
            correct:"shy"
          }
        ]
      }
    ]
  },

  /* MODULE 6 */
  {
    id:17,
    title:"Passive Voice (Present Simple & Past Simple)",
    level:"Module 6",
    ruleEn:`<b>Rule (EN):</b> Passive = be + V3. Focus on the action, not the doer.`,
    ruleRu:`<b>–ü—Ä–∞–≤–∏–ª–æ (RU):</b> –ü–∞—Å—Å–∏–≤–Ω—ã–π –∑–∞–ª–æ–≥ = be + V3. –í–∞–∂–Ω–æ –¥–µ–π—Å—Ç–≤–∏–µ, –∞ –Ω–µ —Ç–æ—Ç, –∫—Ç–æ –µ–≥–æ –¥–µ–ª–∞–µ—Ç.`,
    formula:`Present: am / is / are + V3 (The food is cooked.)<br>
             Past: was / were + V3 (The food was cooked.)`,
    exercises:[
      {
        id:"17a",
        title:"Ex.1 ‚Äì Present Passive.",
        note:"Choose the correct form.",
        questions:[
          {
            id:"q1",
            text:"1) English ___ (speak) all over the world.",
            options:["is spoken","speaks","is speaking"],
            correct:"is spoken"
          },
          {
            id:"q2",
            text:"2) The homework ___ (check) by the teacher.",
            options:["is checked","checked","was checked"],
            correct:"is checked"
          }
        ]
      },
      {
        id:"17b",
        title:"Ex.2 ‚Äì Past Passive.",
        note:"Choose the correct answer.",
        questions:[
          {
            id:"q3",
            text:"3) The film ___ (make) in 2010.",
            options:["was made","is made","made"],
            correct:"was made"
          },
          {
            id:"q4",
            text:"4) The letters ___ (send) yesterday.",
            options:["were sent","are sent"],
            correct:"were sent"
          }
        ]
      }
    ]
  },
  {
    id:18,
    title:"It / There structures",
    level:"Module 6",
    ruleEn:`<b>Rule (EN):</b> <b>It</b> for time, weather, distance: It is cold.<br>
            <b>There is / There are</b> to say something exists: There is a park.`,
    ruleRu:`<b>–ü—Ä–∞–≤–∏–ª–æ (RU):</b> <b>It</b> ‚Äì –ø–æ–≥–æ–¥–∞, –≤—Ä–µ–º—è, —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ. <b>There is / There are</b> ‚Äì ¬´–µ—Å—Ç—å / —Å—É—â–µ—Å—Ç–≤—É–µ—Ç¬ª.`,
    formula:`It is cold. It is 5 o'clock.<br>
             There is a cat. There are two cats.`,
    exercises:[
      {
        id:"18a",
        title:"Ex.1 ‚Äì it or there?",
        note:"Choose the correct subject.",
        questions:[
          {
            id:"q1",
            text:"1) ___ is a big park in our town.",
            options:["It","There"],
            correct:"There"
          },
          {
            id:"q2",
            text:"2) ___ is very hot today.",
            options:["It","There"],
            correct:"It"
          }
        ]
      },
      {
        id:"18b",
        title:"Ex.2 ‚Äì there is / there are.",
        note:"Choose singular or plural.",
        questions:[
          {
            id:"q3",
            text:"3) ___ a dog in the garden.",
            options:["There is","There are"],
            correct:"There is"
          },
          {
            id:"q4",
            text:"4) ___ many students in the classroom.",
            options:["There is","There are"],
            correct:"There are"
          }
        ]
      }
    ]
  },

  /* MODULE 7 */
  {
    id:19,
    title:"Past Continuous",
    level:"Module 7",
    ruleEn:`<b>Rule (EN):</b> Past Continuous ‚Äì action in progress at a specific moment in the past.`,
    ruleRu:`<b>–ü—Ä–∞–≤–∏–ª–æ (RU):</b> Past Continuous ‚Äì –¥–ª–∏—Ç–µ–ª—å–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –≤ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –≤ –ø—Ä–æ—à–ª–æ–º.`,
    formula:`subject + was / were + V-ing`,
    exercises:[
      {
        id:"19a",
        title:"Ex.1 ‚Äì Complete with Past Continuous.",
        note:"Choose the correct form.",
        questions:[
          {
            id:"q1",
            text:"1) I ___ (do) my homework at 6 p.m. yesterday.",
            options:["was doing","did","am doing"],
            correct:"was doing"
          },
          {
            id:"q2",
            text:"2) They ___ (play) football when it started to rain.",
            options:["were playing","played","are playing"],
            correct:"were playing"
          }
        ]
      },
      {
        id:"19b",
        title:"Ex.2 ‚Äì Negative form.",
        note:"Choose the correct negative.",
        questions:[
          {
            id:"q3",
            text:"3) We ___ (not sleep) when the phone rang.",
            options:["weren‚Äôt sleeping","didn‚Äôt sleep"],
            correct:"weren‚Äôt sleeping"
          },
          {
            id:"q4",
            text:"4) She ___ (not watch) TV at that time.",
            options:["wasn‚Äôt watching","didn‚Äôt watching"],
            correct:"wasn‚Äôt watching"
          }
        ]
      }
    ]
  },
  {
    id:20,
    title:"Past Simple vs Past Continuous",
    level:"Module 7",
    ruleEn:`<b>Rule (EN):</b> Past Continuous ‚Äì long action (background).<br>
            Past Simple ‚Äì short action that interrupts.`,
    ruleRu:`<b>–ü—Ä–∞–≤–∏–ª–æ (RU):</b> Past Continuous ‚Äì –¥–ª–∏—Ç–µ–ª—å–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ-—Ñ–æ–Ω.<br>
            Past Simple ‚Äì –∫–æ—Ä–æ—Ç–∫–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç –µ–≥–æ.`,
    formula:`PC + when + PS<br>
             PS + while + PC`,
    exercises:[
      {
        id:"20a",
        title:"Ex.1 ‚Äì Complete with correct tense.",
        note:"Choose Past Simple or Past Continuous.",
        questions:[
          {
            id:"q1",
            text:"1) I ___ (walk) home when I ___ (see) my friend.",
            options:["was walking / saw","walked / was seeing"],
            correct:"was walking / saw"
          },
          {
            id:"q2",
            text:"2) She ___ (watch) TV when the lights ___ (go) off.",
            options:["was watching / went","watched / was going"],
            correct:"was watching / went"
          }
        ]
      },
      {
        id:"20b",
        title:"Ex.2 ‚Äì when or while?",
        note:"Choose the right word.",
        questions:[
          {
            id:"q3",
            text:"3) I was reading ___ my brother was playing.",
            options:["when","while"],
            correct:"while"
          },
          {
            id:"q4",
            text:"4) ___ I was walking to school, it started to snow.",
            options:["When","While"],
            correct:"When"
          }
        ]
      }
    ]
  },

  /* MODULE 8 */
  {
    id:21,
    title:"Zero Conditional",
    level:"Module 8",
    ruleEn:`<b>Rule (EN):</b> Zero Conditional ‚Äì facts and general truths.<br>
            If + Present Simple, Present Simple.`,
    ruleRu:`<b>–ü—Ä–∞–≤–∏–ª–æ (RU):</b> –ù—É–ª–µ–≤–æ–π —É—Å–ª–æ–≤–Ω—ã–π ‚Äì —Ñ–∞–∫—Ç—ã –∏ –≤—Å–µ–≥–¥–∞ –≤–µ—Ä–Ω—ã–µ –≤–µ—â–∏.<br>
            If + Present Simple, Present Simple.`,
    formula:`If + Present Simple, Present Simple.`,
    exercises:[
      {
        id:"21a",
        title:"Ex.1 ‚Äì Choose the correct form.",
        note:"Use Present Simple.",
        questions:[
          {
            id:"q1",
            text:"1) If you ___ (heat) ice, it melts.",
            options:["heat","will heat","heats"],
            correct:"heat"
          },
          {
            id:"q2",
            text:"2) If it rains, the ground ___.",
            options:["gets wet","will get wet"],
            correct:"gets wet"
          }
        ]
      },
      {
        id:"21b",
        title:"Ex.2 ‚Äì Complete sentences.",
        note:"Zero conditional facts.",
        questions:[
          {
            id:"q3",
            text:"3) If people don‚Äôt sleep, they ___.",
            options:["are tired","will be tired"],
            correct:"are tired"
          },
          {
            id:"q4",
            text:"4) If you study hard, you __ good marks.",
            options:["get","will get"],
            correct:"get"
          }
        ]
      }
    ]
  },
  {
    id:22,
    title:"First Conditional",
    level:"Module 8",
    ruleEn:`<b>Rule (EN):</b> First Conditional ‚Äì real future possibility.<br>
            If + Present Simple, will + V1.`,
    ruleRu:`<b>–ü—Ä–∞–≤–∏–ª–æ (RU):</b> –ü–µ—Ä–≤—ã–π —É—Å–ª–æ–≤–Ω—ã–π ‚Äì —Ä–µ–∞–ª—å–Ω–∞—è —Å–∏—Ç—É–∞—Ü–∏—è –≤ –±—É–¥—É—â–µ–º.<br>
            If + Present Simple, will + V1.`,
    formula:`If + Present Simple, will + V1`,
    exercises:[
      {
        id:"22a",
        title:"Ex.1 ‚Äì Complete with will.",
        note:"Use First Conditional.",
        questions:[
          {
            id:"q1",
            text:"1) If it rains, we ___ stay at home.",
            options:["will","won‚Äôt","will to"],
            correct:"will"
          },
          {
            id:"q2",
            text:"2) If I study, I ___ pass the exam.",
            options:["will","won‚Äôt"],
            correct:"will"
          }
        ]
      },
      {
        id:"22b",
        title:"Ex.2 ‚Äì Negative.",
        note:"Choose will or won‚Äôt.",
        questions:[
          {
            id:"q3",
            text:"3) If you don‚Äôt hurry, you ___ catch the bus.",
            options:["won‚Äôt","will"],
            correct:"won‚Äôt"
          },
          {
            id:"q4",
            text:"4) If he doesn‚Äôt eat, he ___ feel good.",
            options:["won‚Äôt","will"],
            correct:"won‚Äôt"
          }
        ]
      }
    ]
  },
  {
    id:23,
    title:"Second Conditional",
    level:"Module 8",
    ruleEn:`<b>Rule (EN):</b> Second Conditional ‚Äì unreal / imaginary situation now.<br>
            If + Past Simple, would + V1.`,
    ruleRu:`<b>–ü—Ä–∞–≤–∏–ª–æ (RU):</b> –í—Ç–æ—Ä–æ–π —É—Å–ª–æ–≤–Ω—ã–π ‚Äì –Ω–µ—Ä–µ–∞–ª—å–Ω–∞—è, –≤–æ–æ–±—Ä–∞–∂–∞–µ–º–∞—è —Å–∏—Ç—É–∞—Ü–∏—è —Å–µ–π—á–∞—Å.<br>
            If + Past Simple, would + V1.`,
    formula:`If + Past Simple, would + V1`,
    exercises:[
      {
        id:"23a",
        title:"Ex.1 ‚Äì Imagination.",
        note:"Choose the correct form.",
        questions:[
          {
            id:"q1",
            text:"1) If I ___ rich, I would travel a lot.",
            options:["am","were","was"],
            correct:"were"
          },
          {
            id:"q2",
            text:"2) If she had more time, she ___ learn Spanish.",
            options:["would","will","would to"],
            correct:"would"
          }
        ]
      },
      {
        id:"23b",
        title:"Ex.2 ‚Äì Complete.",
        note:"Choose correct option.",
        questions:[
          {
            id:"q3",
            text:"3) If we lived near the sea, we ___ swim every day.",
            options:["would","will"],
            correct:"would"
          },
          {
            id:"q4",
            text:"4) If he ___ taller, he would play basketball.",
            options:["was","is"],
            correct:"was"
          }
        ]
      }
    ]
  },
  {
    id:24,
    title:"Modals (must / have to / need to / might)",
    level:"Module 8",
    ruleEn:`<b>Rule (EN):</b> <b>must</b> ‚Äì strong personal obligation. <b>have to</b> ‚Äì external rule.<br>
            <b>need to</b> ‚Äì necessity. <b>might</b> ‚Äì possibility.`,
    ruleRu:`<b>–ü—Ä–∞–≤–∏–ª–æ (RU):</b> <b>must</b> ‚Äì –ª–∏—á–Ω–∞—è –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç—å, <b>have to</b> ‚Äì –ø—Ä–∞–≤–∏–ª–æ.<br>
            <b>need to</b> ‚Äì –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å, <b>might</b> ‚Äì –≤–æ–∑–º–æ–∂–Ω–æ.`,
    formula:`must / have to / need to + V1<br>
             might + V1`,
    exercises:[
      {
        id:"24a",
        title:"Ex.1 ‚Äì School rules.",
        note:"Choose must or have to.",
        questions:[
          {
            id:"q1",
            text:"1) We ___ wear a uniform at school. It‚Äôs a rule.",
            options:["have to","must"],
            correct:"have to"
          },
          {
            id:"q2",
            text:"2) I ___ study more. I want a good mark.",
            options:["must","have to"],
            correct:"must"
          }
        ]
      },
      {
        id:"24b",
        title:"Ex.2 ‚Äì need to / might.",
        note:"Choose the correct modal.",
        questions:[
          {
            id:"q3",
            text:"3) You ___ see a doctor. You are very ill.",
            options:["need to","might"],
            correct:"need to"
          },
          {
            id:"q4",
            text:"4) Take an umbrella. It ___ rain.",
            options:["might","must"],
            correct:"might"
          }
        ]
      }
    ]
  },

  /* MODULE 9 */
  {
    id:25,
    title:"Verb patterns (verb + -ing / to-infinitive / bare infinitive)",
    level:"Module 9",
    ruleEn:`<b>Rule (EN):</b> Some verbs take <b>to + V1</b> (want to go), some take <b>V-ing</b> (enjoy reading), some take bare infinitive (make him do).`,
    ruleRu:`<b>–ü—Ä–∞–≤–∏–ª–æ (RU):</b> –ü–æ—Å–ª–µ —Ä–∞–∑–Ω—ã—Ö –≥–ª–∞–≥–æ–ª–æ–≤ –∏–¥—É—Ç —Ä–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º—ã: <b>to + V1</b>, <b>V-ing</b> –∏–ª–∏ –∏–Ω—Ñ–∏–Ω–∏—Ç–∏–≤ –±–µ–∑ to.`,
    formula:`want to do, decide to go<br>
             enjoy doing, hate doing<br>
             make sb do, let sb do`,
    exercises:[
      {
        id:"25a",
        title:"Ex.1 ‚Äì to + V or V-ing?",
        note:"Choose the correct form.",
        questions:[
          {
            id:"q1",
            text:"1) I want ___ (go) to the cinema.",
            options:["to go","going"],
            correct:"to go"
          },
          {
            id:"q2",
            text:"2) She enjoys ___ (read) books.",
            options:["to read","reading"],
            correct:"reading"
          }
        ]
      },
      {
        id:"25b",
        title:"Ex.2 ‚Äì bare infinitive or to-infinitive?",
        note:"Think about the pattern.",
        questions:[
          {
            id:"q3",
            text:"3) My parents made me ___ (clean) my room.",
            options:["clean","to clean"],
            correct:"clean"
          },
          {
            id:"q4",
            text:"4) I decided ___ (start) a new hobby.",
            options:["start","to start"],
            correct:"to start"
          }
        ]
      }
    ]
  },
  {
    id:26,
    title:"Relative pronouns (who / which / where)",
    level:"Module 9",
    ruleEn:`<b>Rule (EN):</b> <b>who</b> ‚Äì people, <b>which</b> ‚Äì things, <b>where</b> ‚Äì places.`,
    ruleRu:`<b>–ü—Ä–∞–≤–∏–ª–æ (RU):</b> <b>who</b> ‚Äì –ª—é–¥–∏, <b>which</b> ‚Äì –ø—Ä–µ–¥–º–µ—Ç—ã, <b>where</b> ‚Äì –º–µ—Å—Ç–∞.`,
    formula:`This is the boy who plays football.<br>
             This is the book which I like.<br>
             This is the place where I live.`,
    exercises:[
      {
        id:"26a",
        title:"Ex.1 ‚Äì Choose who, which or where.",
        note:"Look at the noun.",
        questions:[
          {
            id:"q1",
            text:"1) The girl ___ is sitting there is my sister.",
            options:["who","which","where"],
            correct:"who"
          },
          {
            id:"q2",
            text:"2) This is the park ___ we play football.",
            options:["who","which","where"],
            correct:"where"
          }
        ]
      },
      {
        id:"26b",
        title:"Ex.2 ‚Äì Choose the correct relative pronoun.",
        note:"People or things?",
        questions:[
          {
            id:"q3",
            text:"3) The book ___ I‚Äôm reading is very interesting.",
            options:["who","which","where"],
            correct:"which"
          },
          {
            id:"q4",
            text:"4) The man ___ teaches us English is very kind.",
            options:["who","which","where"],
            correct:"who"
          }
        ]
      }
    ]
  },
  {
    id:27,
    title:"Determiners (all / other)",
    level:"Module 9",
    ruleEn:`<b>Rule (EN):</b> <b>all</b> ‚Äì every person/thing in a group. <b>other</b> ‚Äì different / remaining.`,
    ruleRu:`<b>–ü—Ä–∞–≤–∏–ª–æ (RU):</b> <b>all</b> ‚Äì –≤—Å–µ. <b>other</b> ‚Äì –¥—Ä—É–≥–∏–µ, –æ—Å—Ç–∞–ª—å–Ω—ã–µ.`,
    formula:`all + plural noun<br>
             other / another + noun`,
    exercises:[
      {
        id:"27a",
        title:"Ex.1 ‚Äì all or other?",
        note:"Choose the correct word.",
        questions:[
          {
            id:"q1",
            text:"1) ___ students in my class like English.",
            options:["All","Other"],
            correct:"All"
          },
          {
            id:"q2",
            text:"2) Some people are late, but ___ are here.",
            options:["all","others"],
            correct:"others"
          }
        ]
      },
      {
        id:"27b",
        title:"Ex.2 ‚Äì another / other.",
        note:"Choose the best option.",
        questions:[
          {
            id:"q3",
            text:"3) I‚Äôm still hungry. I want ___ sandwich.",
            options:["another","other"],
            correct:"another"
          },
          {
            id:"q4",
            text:"4) Do you have any ___ questions?",
            options:["other","another"],
            correct:"other"
          }
        ]
      }
    ]
  },
  {
    id:28,
    title:"some / any / every / no + compounds",
    level:"Module 9",
    ruleEn:`<b>Rule (EN):</b> some-, any-, every-, no- + body / thing / where make pronouns (somebody, nothing, everywhere).`,
    ruleRu:`<b>–ü—Ä–∞–≤–∏–ª–æ (RU):</b> some-, any-, every-, no- + body/thing/where ‚Üí –º–µ—Å—Ç–æ–∏–º–µ–Ω–∏—è (somebody, anything, nowhere –∏ —Ç.–¥.).`,
    formula:`somebody, anybody, everybody, nobody<br>
             something, anything, everything, nothing<br>
             somewhere, anywhere, everywhere, nowhere`,
    exercises:[
      {
        id:"28a",
        title:"Ex.1 ‚Äì Choose the correct compound.",
        note:"Think about meaning.",
        questions:[
          {
            id:"q1",
            text:"1) I can‚Äôt find my phone. It‚Äôs ___.",
            options:["nowhere","everywhere"],
            correct:"nowhere"
          },
          {
            id:"q2",
            text:"2) ___ is knocking at the door.",
            options:["Somebody","Nothing"],
            correct:"Somebody"
          }
        ]
      },
      {
        id:"28b",
        title:"Ex.2 ‚Äì some / any / no.",
        note:"Choose correct part.",
        questions:[
          {
            id:"q3",
            text:"3) I don‚Äôt have ___ money.",
            options:["any","some"],
            correct:"any"
          },
          {
            id:"q4",
            text:"4) There is ___ in the box. It‚Äôs empty.",
            options:["nothing","anything"],
            correct:"nothing"
          }
        ]
      }
    ]
  },
  {
    id:29,
    title:"Reported speech ‚Äì statements",
    level:"Module 9",
    ruleEn:`<b>Rule (EN):</b> In reported speech, tenses usually go one step back (Present ‚Üí Past, will ‚Üí would).`,
    ruleRu:`<b>–ü—Ä–∞–≤–∏–ª–æ (RU):</b> –í –∫–æ—Å–≤–µ–Ω–Ω–æ–π —Ä–µ—á–∏ –≤—Ä–µ–º–µ–Ω–∞ ¬´–æ—Ç–∫–∞—Ç—ã–≤–∞—é—Ç—Å—è¬ª –Ω–∞–∑–∞–¥ (Present ‚Üí Past, will ‚Üí would).`,
    formula:`‚ÄúI am tired.‚Äù ‚Üí He said (that) he was tired.<br>
             ‚ÄúI will go.‚Äù ‚Üí She said (that) she would go.`,
    exercises:[
      {
        id:"29a",
        title:"Ex.1 ‚Äì Change to reported speech.",
        note:"Choose the correct answer.",
        questions:[
          {
            id:"q1",
            text:"1) ‚ÄúI am busy.‚Äù ‚Üí He said he ___ busy.",
            options:["was","is"],
            correct:"was"
          },
          {
            id:"q2",
            text:"2) ‚ÄúI will help you.‚Äù ‚Üí She said she ___ help me.",
            options:["would","will"],
            correct:"would"
          }
        ]
      },
      {
        id:"29b",
        title:"Ex.2 ‚Äì Choose the correct tense.",
        note:"Reported statements.",
        questions:[
          {
            id:"q3",
            text:"3) ‚ÄúI like this film.‚Äù ‚Üí He said he ___ that film.",
            options:["liked","likes"],
            correct:"liked"
          },
          {
            id:"q4",
            text:"4) ‚ÄúWe are going home.‚Äù ‚Üí They said they ___ going home.",
            options:["were","are"],
            correct:"were"
          }
        ]
      }
    ]
  },
  {
    id:30,
    title:"said / told, requests & commands (reported speech)",
    level:"Module 9",
    ruleEn:`<b>Rule (EN):</b> <b>said</b> ‚Äì usually without object; <b>told</b> ‚Äì with object (told me).<br>
            Requests and commands: told / asked + object + to V1 / not to V1.`,
    ruleRu:`<b>–ü—Ä–∞–≤–∏–ª–æ (RU):</b> <b>said</b> ‚Äì ¬´—Å–∫–∞–∑–∞–ª¬ª; <b>told + object</b> ‚Äì ¬´—Å–∫–∞–∑–∞–ª –∫–æ–º—É-—Ç–æ¬ª.<br>
            –ü—Ä–æ—Å—å–±—ã –∏ –ø—Ä–∏–∫–∞–∑—ã: told / asked + –æ–±—ä–µ–∫—Ç + to V1 / not to V1.`,
    formula:`He said (that)...<br>
             He told me (that)...<br>
             She told me to sit down.<br>
             She told me not to be late.`,
    exercises:[
      {
        id:"30a",
        title:"Ex.1 ‚Äì said or told?",
        note:"Remember: told + object.",
        questions:[
          {
            id:"q1",
            text:"1) He ___ me that he was tired.",
            options:["told","said"],
            correct:"told"
          },
          {
            id:"q2",
            text:"2) She ___ that she was happy.",
            options:["said","told"],
            correct:"said"
          }
        ]
      },
      {
        id:"30b",
        title:"Ex.2 ‚Äì requests and commands.",
        note:"Choose correct reported form.",
        questions:[
          {
            id:"q3",
            text:"3) ‚ÄúPlease help me.‚Äù ‚Üí She asked me ___ her.",
            options:["to help","help"],
            correct:"to help"
          },
          {
            id:"q4",
            text:"4) ‚ÄúDon‚Äôt be late.‚Äù ‚Üí My mum told me ___ late.",
            options:["not to be","to not be"],
            correct:"not to be"
          }
        ]
      }
    ]
  }
];

/* ---------- STATE & STORAGE ---------- */

let currentUser = null;   // {name, code, progress:{}}
let currentTopic = null;

function userKey(code){
  return "aiBayan7_user_" + code;
}

function loadUser(code){
  const raw = localStorage.getItem(userKey(code));
  if(!raw) return null;
  try{ return JSON.parse(raw); }catch(e){ return null; }
}

function saveUser(){
  if(!currentUser) return;
  localStorage.setItem(userKey(currentUser.code), JSON.stringify(currentUser));
}

function getTotalStars(user){
  if(!user || !user.progress) return 0;
  let sum = 0;
  Object.values(user.progress).forEach(exDict=>{
    Object.values(exDict).forEach(best=>{
      sum += best;
    });
  });
  return sum;
}

/* ---------- LOGIN ---------- */

function resetLogin(){
  document.getElementById("loginName").value = "";
  document.getElementById("loginCode").value = "";
  document.getElementById("loginError").textContent = "";
}

function handleLogin(){
  const name = document.getElementById("loginName").value.trim();
  const codeStr = document.getElementById("loginCode").value.trim();
  const errorEl = document.getElementById("loginError");

  if(!name || !codeStr){
    errorEl.textContent = "Please enter name and code.";
    return;
  }
  const code = Number(codeStr);
  // –¥–∏–∞–ø–∞–∑–æ–Ω –æ—Å—Ç–∞–≤–ª—è–µ–º —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏, –Ω–æ –±–µ–∑ –ø–æ–¥—Å–∫–∞–∑–∫–∏ –Ω–∞ —ç–∫—Ä–∞–Ω–µ
  if(Number.isNaN(code) || code < 701 || code > 720){
    errorEl.textContent = "This code is not valid. Ask your teacher.";
    return;
  }

  let user = loadUser(code);
  if(!user){
    user = {name, code, progress:{}};
  }else{
    user.name = name;
  }
  currentUser = user;
  saveUser();
  updateHeader();
  renderTopics();
  showScreen("mainScreen");
}

/* ---------- UI HELPERS ---------- */

function showScreen(id){
  document.querySelectorAll(".screen").forEach(s=>s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}

function updateHeader(){
  const status = document.getElementById("userStatus");
  const starsEl = document.getElementById("userStars");
  if(!currentUser){
    status.textContent = "Not logged in";
    starsEl.textContent = "Stars: 0";
  }else{
    status.textContent = `Student code ${currentUser.code} ¬∑ ${currentUser.name}`;
    starsEl.textContent = "Stars: " + getTotalStars(currentUser);
  }
}

/* ---------- TOPICS LIST ---------- */

function renderTopics(){
  const list = document.getElementById("topicList");
  const starsInfo = document.getElementById("starsInfo");
  list.innerHTML = "";

  const total = getTotalStars(currentUser);
  starsInfo.textContent = `Your total stars: ${total}`;

  topics.forEach((t,idx)=>{
    const card = document.createElement("div");
    card.className = "topic-card";
    card.onclick = ()=>openTopic(t.id);

    const top = document.createElement("div");
    top.className = "topic-title-line";

    const title = document.createElement("h3");
    title.textContent = `${idx+1}. ${t.title}`;
    top.appendChild(title);

    const starSpan = document.createElement("span");
    starSpan.className = "topic-stars";
    const topicStars = getTopicStars(t.id);
    starSpan.textContent = `‚òÖ ${topicStars}`;
    top.appendChild(starSpan);

    const level = document.createElement("div");
    level.className = "topic-level";
    level.textContent = t.level + " ¬∑ Grammar B";

    card.appendChild(top);
    card.appendChild(level);

    list.appendChild(card);
  });
}

function getTopicStars(topicId){
  if(!currentUser || !currentUser.progress) return 0;
  const tp = currentUser.progress[topicId];
  if(!tp) return 0;
  let sum = 0;
  Object.values(tp).forEach(v=>sum+=v);
  return sum;
}

/* ---------- TOPIC VIEW ---------- */

function openTopic(id){
  const topic = topics.find(t=>t.id===id);
  if(!topic) return;
  currentTopic = topic;

  document.getElementById("topicHeaderTitle").textContent = topic.title;
  document.getElementById("topicHeaderTagline").textContent =
    topic.level + " ¬∑ each correct answer gives stars";

  const content = document.getElementById("topicContent");
  let html = "";

  html += `<div class="rule-box">${topic.ruleEn}</div>`;
  html += `<div class="rule-box">${topic.ruleRu}</div>`;
  html += `<div class="formula-box">${topic.formula}</div>`;

  topic.exercises.forEach(ex=>{
    html += `<div class="exercise-block" id="ex_${topic.id}_${ex.id}">
               <div class="exercise-title">${ex.title}</div>
               <div class="exercise-note">${ex.note}</div>`;
    ex.questions.forEach(q=>{
      const name = `t${topic.id}_e${ex.id}_q${q.id}`;
      html += `<div class="question">${q.text}</div><div class="options-row">`;
      q.options.forEach(opt=>{
        const safe = opt.replace(/\s+/g,"_");
        const optId = name + "_" + safe;
        html += `<label class="option-label">
                   <input type="radio" name="${name}" value="${opt}" id="${optId}">
                   <span class="opt-text">${opt}</span>
                   <span class="opt-mark"></span>
                 </label>`;
      });
      html += `</div>`;
    });
    html += `<div class="check-row">
               <button class="btn btn-primary" type="button"
                 onclick="checkExercise(${topic.id}, '${ex.id}')">Check</button>
             </div>
             <div class="exercise-result" id="res_${topic.id}_${ex.id}"></div>
           </div>`;
  });

  content.innerHTML = html;

  showScreen("topicScreen");
}

function backToTopics(){
  showScreen("mainScreen");
}

function goMain(){
  showScreen("mainScreen");
}

/* ---------- CHECKING & STARS + ‚úì / ‚úó ---------- */

function checkExercise(topicId, exId){
  const topic = topics.find(t=>t.id===topicId);
  if(!topic) return;
  const ex = topic.exercises.find(e=>e.id===exId);
  if(!ex) return;

  const resEl = document.getElementById(`res_${topicId}_${exId}`);

  let correct = 0;
  const total = ex.questions.length;

  ex.questions.forEach(q=>{
    const name = `t${topicId}_e${exId}_q${q.id}`;
    const radios = document.querySelectorAll(`input[name="${name}"]`);
    let chosenValue = null;

    // –æ—á–∏—Å—Ç–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –≥–∞–ª–æ—á–∫–∏/–∫—Ä–µ—Å—Ç–∏–∫–∏
    radios.forEach(r=>{
      const label = r.closest("label");
      if(label){
        label.classList.remove("correct-chosen","wrong-chosen");
      }
      if(r.checked){
        chosenValue = r.value;
      }
    });

    // –µ—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –≤—ã–±—Ä–∞–Ω–æ ‚Äì –ø—Ä–æ–ø—É—Å–∫–∞–µ–º –≤–æ–ø—Ä–æ—Å
    if(!chosenValue){
      return;
    }

    radios.forEach(r=>{
      const label = r.closest("label");
      if(!label) return;

      if(r.checked){
        if(r.value.trim() === q.correct.trim()){
          label.classList.add("correct-chosen");
          correct++;
        }else{
          label.classList.add("wrong-chosen");
        }
      }
    });
  });

  if(!currentUser.progress) currentUser.progress = {};
  if(!currentUser.progress[topicId]) currentUser.progress[topicId] = {};
  const prevBest = currentUser.progress[topicId][exId] || 0;
  const newBest = Math.max(prevBest, correct);
  currentUser.progress[topicId][exId] = newBest;
  saveUser();
  updateHeader();
  renderTopics();

  const gained = newBest - prevBest;
  if(correct === total && total > 0){
    resEl.textContent = `Perfect: ${correct}/${total}. New stars: ${gained}.`;
    resEl.className = "exercise-result ok";
  }else{
    resEl.textContent = `You got ${correct}/${total}. Best result saved. New stars: ${gained}.`;
    resEl.className = "exercise-result bad";
  }
}

/* ---------- INIT ---------- */

updateHeader();
</script>
</body>
</html>
